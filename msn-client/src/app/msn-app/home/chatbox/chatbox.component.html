<div class="window active glass second-window window-msn" cdkDrag 
[cdkDragFreeDragPosition]="dragPosition" 
cdkDragBoundary="#desktop"
[cdkDragDisabled]="isFullScreen">
    <div class="title-bar" cdkDragHandle>
      <div class="title-bar-text"><img src="assets/images/buddy.png" class="title-icon" alt=""> Windows Live Messenger </div>
      <div class="title-bar-controls">
        <button aria-label="Minimize" (click)="minimizeOrResume()"></button>
        <button [ariaLabel]="!isFullScreen ? 'Maximize' : 'Restore'" (click)="onFullScreen()"></button>
        <button aria-label="Close" (click)="minimizeOrResume()"></button>
      </div>
    </div>
    <div class="window-body" *ngIf="!isLoading">
        <ul role="menubar">
          <li tabindex="0" role="menuitem" > 
            <img src="assets/images/pictures.png" alt="">
            <span>Photos</span>
          </li>
          <li tabindex="0" role="menuitem" (click)="onAppelStarted()" title="Commencer un appel video">
            <img src="assets/images/webcam.png" alt="">
            <span>Vidéo</span> 
          </li>
          <li tabindex="0" role="menuitem" title="Commencer un appel audio">
            <img src="assets/images/phone.png" alt="">
            <span>Audio</span> 
          </li>
          <li tabindex="0" role="menuitem" >
            <img src="assets/images/block.png" alt="">
            <span>Bloquer</span>
          </li>
        </ul>
        <div class="banner-holder">
          <img src="assets/images/default.png" alt="">
          <!-- <img src="https://images.unsplash.com/photo-1481988535861-271139e06469?q=80&w=2090&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt=""> -->
        </div>
        <div class="content-container">
          <div class="content-card">
            <app-profile-holder [fullScreen]="isFullScreen" (videoFullScreen)="onVideoFullScreenChange()" [appelStarted]="appelStarted"></app-profile-holder>
            <div class="chat-zone">
              <div class="ami-info">
                <div class="name-holder">
                  <span class="name">John Doe</span>
                  <span class="status">(Hors ligne)</span>
                </div>
                <div class="desc">
                  Hello, I am John Doe
                </div>
              </div>
              <hr>
              <div class="chat-list has-scrollbar" #chatList>
                <div class="chat-item">
                  <div class="sender">John Doe said</div>
                  <div class="message">
                    <span class="point"></span>
                    <div class="message-body"
                    [innerHTML]="parseEmoji('Hello , I am John Doe :cry_smile:')">
                    </div>
                  </div>
                </div>
                <div class="chat-item">
                  <div class="sender">John Doe said</div>
                  <div class="message">
                    <span class="point"></span>
                    <div class="message-body" 
                    [innerHTML]="parseEmoji('Hello :birthday:, I am John Doe :angel_smile:')">
                    </div>
                  </div>
                </div>
                <div class="interaction">
                  <hr>
                  <div class="sender">John Doe à envoyé un Wizz</div>
                  <hr>
                </div>
                <div class="chat-item">
                  <div class="sender">John Doe said</div>
                  <div class="message">
                    <span class="point"></span>
                    <div class="message-body"
                    [innerHTML]="parseEmoji(':birthday: SAlljipjoirg rettr retrtert:shades_smile::kiss::blaze::devil_smile:terertre etrert ertret:bruh::\(O_O\)::=P:')">
                    </div>
                  </div>
                </div>
                <div class="chat-item">
                  <div class="sender">John Doe à envoyée une image</div>
                  <hr>
                  <div class="message">
                    <div class="message-body">
                      <img (click)="onShowDialogImg($event)" 
                      src="https://images.unsplash.com/photo-1481988535861-271139e06469?q=80&w=2090&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" 
                      alt="" title="Cliquez pour agrandir">
                    </div>
                  </div>
                  <hr>
                </div>
                <div class="chat-item">
                  <div class="sender">John Doe à envoyée un clin d'oeil</div>
                  <hr>
                  <div class="message">
                    <div class="message-body">
                      <img 
                      src="assets/images/winks/kiss.png" 
                      alt="" title="Cliquez pour jouer le clin d'oeil" 
                      winkName="Kiss" (click)="onPlayWink($event)">
                    </div>
                  </div>
                  <hr>
                </div>
              </div>
              <div class="chat-input">
                <div role="tooltip" class="is-top is-right">
                  <textarea [ngStyle]="style" placeholder="Écrivez un message" class="text-input" #messageInput></textarea>
                </div>
                <div class="chat-input-options">
                  <button type="button" class="opt emoji" 
                  (click)="onEmojiPickerOpen()" title="Envoyer un émoticone">
                    <img class="emoji" src="assets/images/emojis/teeth_smile.png" alt="">
                  </button>
                  <button type="button" class="opt wink" 
                  (click)="onWinkPickerOpen()" title="Envoyer un clin d'oeil">
                    <img src="assets/images/emojis/wink_smile.gif" alt="" class="wink">
                  </button>
                  <button type="button" class="opt" 
                  (click)="onNudge()" title="Envoyer un nudge">
                    <img src="assets/images/emojis/wizz-msn.png" alt="">
                  </button>
                  <button type="button" class="opt" 
                  (click)="onPhotoSelection()" title="Envoyer une image">
                    <img src="assets/images/pictures.png" alt="">
                  </button>
                  <button type="button" class="opt text-edit" 
                  title="Modifier le texte" (click)="onTextEditOpen()">
                    <img src="assets/images/text.png" alt="" class="text-edit">
                  </button>
                  
                </div>
              </div>
              <app-emoji-picker [open$]="emojiPickerOpen$" (emojiSelected)="onEmojiPicked($event)"></app-emoji-picker>
              <app-winks-picker [open$]="winksPickerOpen$"></app-winks-picker>
              <app-text-edit [open$]="textEditOpen$" (textEditedEvent)="onTextEdited($event)"></app-text-edit>
            </div>
          </div>
        </div>
    </div>
    <div class="window-body loading" *ngIf="isLoading">
      <img src="assets/images/buddy.png" alt="">
      <div>
        <span>Chargement </span>
        <span class="loader animate" aria-label="Processing your request"></span>
      </div>
    </div>
</div>

<div class="window active is-bright glass" 
  role="dialog" aria-labelledby="dialog-title" 
  aria-modal="true" cdkDrag #dialogImg cdkDragBoundary="#desktop">
  <div class="title-bar" cdkDragHandle>
    <div class="title-bar-text" id="dialog-title">Photo</div>
    <div class="title-bar-controls">
      <button aria-label="Close" (click)="onHideDialogImg()"></button>
    </div>
  </div>
  <div class="window-body">
    <img #imgDialog src="" alt="" class="img-view">
  </div>
</div>


<div class="window active is-bright glass" 
  role="dialog" aria-labelledby="dialog-title" 
  aria-modal="true" cdkDrag #dialogImgSend cdkDragBoundary="#desktop">
  <div class="title-bar" cdkDragHandle>
    <div class="title-bar-text" id="dialog-title">Photo</div>
    <div class="title-bar-controls">
      <button aria-label="Close" (click)="onHideDialogImgSend()"></button>
    </div>
  </div>
  <form class="window-body img-send-dialog-body">
    <img #imgDialogSend src="assets/images/default.png" alt="" class="img-send-preview">
    <input type="file" #photoInput accept="image/*" (change)="onImgSendChange()">
    <button type="button" >Envoyer</button>
  </form>
</div>